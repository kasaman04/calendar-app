# カレンダーアプリ開発メモ

## 長期スケジュールバークリック→カスタムモーダル表示機能の統合

### 目標
calendar-card.htmlの長期スケジュールバーをクリックした時に、schedule-modal-test.htmlで作成したカスタムモーダル（Image/40.png形式）を表示する

### 現状分析
- ✅ schedule-modal-test.htmlでカスタムモーダル完成
- ✅ calendar-card.htmlの長期スケジュールバークリック機能削除済み
- ✅ 長期スケジュールデータはlocalStorageに保存済み

### 実装手順

#### Phase 1: モーダルHTML/CSS統合
**作業内容**:
1. schedule-modal-test.htmlからモーダル関連のCSSをcalendar-card.htmlにコピー
2. モーダルHTMLをcalendar-card.htmlに統合
3. React stateでモーダル表示制御

#### Phase 2: クリックイベント復活
**作業内容**:
1. 長期スケジュールバー（2箇所）にonClickイベント追加
2. クリック時にshowScheduleDetails関数呼び出し
3. 予定データ（title, memo, days）を取得してモーダル表示

#### Phase 3: データ連携
**作業内容**:
1. longSchedules配列から該当する予定データ取得
2. タイトル：「◯～◯日の予定」動的生成
3. 予定詳細：schedule.title表示
4. メモ：schedule.memo表示（存在する場合）

#### Phase 4: エラーハンドリング
**作業内容**:
1. undefinedデータのチェック
2. try-catch追加
3. フォールバック表示

### 統合後のファイル構成
- calendar-card.html: メインアプリ + 統合されたモーダル
- schedule-modal-test.html: テスト用（保持）

### 注意事項
- 各段階でページ表示確認必須
- エラー時は前段階に戻す
- 既存機能への影響を最小限に

この統合により、長期スケジュールバークリック時に美しいカスタムモーダルが表示され、保存された予定内容が適切に表示されます。

---

## 旧開発メモ（参考）

**確認項目**:
- ✅ 実データ表示
- ✅ 全体的な安定性

### 重要な注意事項
- **各Phaseで必ずページ表示確認**
- **問題があれば前段階に戻す**
- **一度に多くの変更をしない**
- **エラーログを確認する習慣**

### 🚨 必須の動作確認ルール
**修正＆実装が終わったら必ずページが見れる状態か確認して、表示されてなかったら直してから連絡する**

#### 確認手順
1. ファイル保存後、ブラウザでページを開く
2. カレンダーが正常に表示されることを確認
3. 基本機能（月移動、日付クリック等）が動作することを確認
4. 実装した機能が正常に動作することを確認
5. **表示されない場合は以下の緊急対応を実施**

#### 緊急対応手順（ページが表示されない場合）
1. **即座にモーダル無効化**: `{false && showScheduleDetailModal && (`
2. **クリックイベントをアラートに戻す**: `alert(\`スケジュール: \${schedule.title}\`)`
3. **再度ページ表示確認**
4. **安全な状態になってから状況報告**

#### 絶対に守ること
- ❌ ページが表示されない状態で連絡しない
- ✅ 必ず動作する状態にしてから連絡する
- ✅ 問題があった場合は対処法も一緒に報告する

### 関連ファイル
- メインファイル: `/mnt/c/Users/iwasa kazuma/Claude Code/カレンダーアプリ/calendar-card.html`
- テストファイル: `/mnt/c/Users/iwasa kazuma/Claude Code/カレンダーアプリ/schedule-modal-test.html`
- 参考画像: `/mnt/c/Users/iwasa kazuma/Claude Code/カレンダーアプリ/Image/40.png` (目標モーダル)
- 参考画像: `/mnt/c/Users/iwasa kazuma/Claude Code/カレンダーアプリ/Image/41.png` (長期スケジュールバー)

---

*最終更新: 2025-06-19*